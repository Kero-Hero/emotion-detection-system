# 实时情绪识别系统

基于Python、OpenCV和深度学习的实时人脸情绪检测系统，具有美观的Web界面。

## 🌐 在线演示

- **GitHub Pages**: [查看演示](https://您的用户名.github.io/emotion-detection-system)
- **云端应用**: [在线体验](https://您的应用.herokuapp.com)

## 功能特点

- 🎥 **实时摄像头捕获**: 支持本地摄像头实时视频流
- 😊 **情绪识别**: 检测7种基本情绪（开心、悲伤、愤怒、惊讶、恐惧、厌恶、平静）
- 📊 **实时数据可视化**: 动态显示情绪概率分布
- 📱 **响应式Web界面**: 基于HTML5/CSS3/JavaScript的现代化界面
- 📈 **历史记录**: 记录和显示情绪变化历史
- 🎨 **美观UI**: 渐变背景、动画效果、图标支持
- ☁️ **云端部署**: 支持多种云平台部署

## 版本说明

### 📱 本地完整版
- **文件**: `simple_emotion_detector.py`
- **功能**: 摄像头实时检测，完整AI模型
- **适用**: 本地开发和测试

### ☁️ 云端演示版
- **文件**: `app.py`
- **功能**: 模拟数据演示，无需摄像头
- **适用**: 云端部署和在线展示

## 系统要求

### 本地运行
- Windows 10/11
- Python 3.8+
- 摄像头设备
- 网络连接（首次运行需要下载模型）

### 云端部署
- GitHub账号
- 云平台账号（Heroku、Railway、Render等）

## 🚀 快速部署

### 💻 一键部署到GitHub

**双击运行** `deploy_to_github.bat`:
- 自动提交代码到Git
- 提供GitHub仓库创建指导
- 自动推送到GitHub
- 启用GitHub Pages演示

### ☁️ 云平台部署

详细部署指南请参考 [DEPLOYMENT.md](DEPLOYMENT.md)

支持的云平台：
- **Heroku**: 免费额度，支持自定义域名
- **Railway**: 现代化平台，部署简单
- **Render**: 静态站点和Web服务
- **GitHub Pages**: 免费静态页面托管

## 本地快速开始

### 方法一：一键安装（推荐）

1. **双击运行** `install_dependencies.bat`
   - 自动检查Python环境
   - 自动安装所有依赖包
   - 验证安装结果

2. **双击运行** `start_app.bat`
   - 启动Web服务器
   - 自动提示访问地址

3. **打开浏览器访问** `http://localhost:5000`

### 方法二：手动安装

1. **安装依赖包**:
   ```bash
   pip install -r requirements.txt
   ```

2. **运行程序**:
   ```bash
   # 高级版本（使用FER深度学习模型）
   python emotion_detector.py
   
   # 简化版本（仅使用OpenCV，更稳定）
   python simple_emotion_detector.py
   ```

3. **访问界面**: 打开浏览器访问 `http://localhost:5000`

## 使用说明

1. **启动摄像头**: 点击"启动摄像头"按钮
2. **开始检测**: 面对摄像头，系统会自动检测您的面部表情
3. **查看结果**: 右侧面板实时显示情绪分析结果和历史记录
4. **停止检测**: 点击"停止摄像头"按钮结束检测

## 项目结构

```
情绪识别/
├── emotion_detector.py          # 主程序（高级版）
├── simple_emotion_detector.py   # 简化版程序
├── requirements.txt             # 依赖包列表
├── install_dependencies.bat     # 自动安装脚本
├── start_app.bat               # 启动脚本
├── templates/
│   └── index.html              # Web界面模板
└── README.md                   # 说明文档
```

## 技术架构

### 后端技术
- **Python Flask**: Web框架
- **OpenCV**: 计算机视觉和图像处理
- **FER**: 面部情绪识别深度学习库
- **TensorFlow**: 深度学习框架
- **NumPy**: 数值计算

### 前端技术
- **HTML5**: 页面结构
- **CSS3**: 样式设计（渐变、动画、响应式）
- **JavaScript**: 交互逻辑
- **Font Awesome**: 图标库

### 核心算法
1. **人脸检测**: 使用OpenCV的Haar特征级联分类器
2. **情绪识别**: 
   - 高级版：FER库的预训练CNN模型
   - 简化版：基于面部特征的规则判断
3. **实时处理**: 多线程视频流处理

## 支持的情绪类型

| 情绪 | 英文 | 颜色标识 | 检测特征 |
|------|------|----------|----------|
| 😊 开心 | Happy | 黄色 | 微笑、眼部特征 |
| 😢 悲伤 | Sad | 蓝色 | 嘴角下垂、眉毛位置 |
| 😠 愤怒 | Angry | 红色 | 眉毛紧锁、嘴部紧张 |
| 😲 惊讶 | Surprise | 橙色 | 眼部睁大、嘴部张开 |
| 😨 恐惧 | Fear | 紫色 | 眼部特征、面部紧张 |
| 🤢 厌恶 | Disgust | 绿色 | 鼻部皱起、嘴部表情 |
| 😐 平静 | Neutral | 灰色 | 面部表情自然 |

## 性能优化

- **帧率控制**: ~30 FPS，确保流畅体验
- **模型优化**: 使用MTCNN进行更精确的人脸检测
- **内存管理**: 限制历史记录长度，避免内存泄漏
- **异步处理**: 视频流和数据更新分离

## 故障排除

### 常见问题

1. **摄像头无法启动**
   - 检查摄像头是否被其他程序占用
   - 确认摄像头权限设置
   - 尝试更换USB端口

2. **依赖安装失败**
   - 确认Python版本≥3.8
   - 升级pip: `python -m pip install --upgrade pip`
   - 使用国内镜像: `pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt`

3. **情绪检测不准确**
   - 确保光线充足
   - 保持正面面对摄像头
   - 避免遮挡面部
   - 尝试使用简化版本

4. **网页无法访问**
   - 检查防火墙设置
   - 确认端口5000未被占用
   - 尝试使用 `127.0.0.1:5000`

### 版本选择建议

- **推荐使用**: `emotion_detector.py` (功能完整，精度高)
- **备用方案**: `simple_emotion_detector.py` (依赖少，稳定性好)

## 开发计划

- [ ] 添加更多情绪类型
- [ ] 支持多人脸同时检测
- [ ] 情绪数据导出功能
- [ ] 移动端适配
- [ ] 情绪统计报告
- [ ] 自定义模型训练

## 许可证

本项目仅供学习和研究使用，请勿用于商业用途。

## 作者

GitHub Copilot - AI编程助手

## 更新日志

### v1.0.0 (2025-07-29)
- 首次发布
- 实现基本情绪识别功能
- 添加Web界面
- 支持实时视频流
- 提供两个版本选择
